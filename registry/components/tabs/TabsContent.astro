---
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';
import { Card } from '@/components/ui/display/card';

const tabsContentVariants = cva(
    'w-full h-full ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',
    {
        variants: {
            variant: {
                default: '',
                card: 'rounded-md border border-border bg-card p-6',
                padded: 'p-4',
            },
        },
    }
);

export interface Props extends VariantProps<typeof tabsContentVariants> {
    value: string;
    preview?: boolean;
    class?: string;
    [key: string]: any; // Alpine.js pass-through
}

const { value, preview = false, class: className, ...alpineProps } = Astro.props;
---

<div
    x-show={`selectedTab === '${value}'`}
    x-cloak
    class={cn(tabsContentVariants(), !preview && className)}
    role="tabpanel"
    aria-labelledby={`trigger-${value}`}
    id={`content-${value}`}
    tabindex="0"
    data-value={value}
    {...alpineProps}
>
    {preview ? (
        <Card elevation="flat" class={cn("w-full h-[400px] overflow-y-auto p-8", className)}>
            <slot />
        </Card>
    ) : (
        <slot />
    )}
</div>
